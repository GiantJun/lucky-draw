# 虎牙风格年会抽奖系统 UI 重设计方案

> ⚠️ **核心设计原则**：完全保留现有的 TagCanvas 3D 标签云旋转效果，只在外层添加虎牙风格的磨砂玻璃容器和呼吸灯边框。

## 一、设计理念

### 1.1 视觉风格定位
- **配色方案**：虎牙品牌色 - 深紫色(#1a0b2e / #2d1b4e) + 霓虹黄(#f9d71c / #ffd700)
- **设计语言**：赛博朋克 + 磨砂玻璃 + 霓虹光效
- **交互体验**：流畅的动画过渡 + 呼吸灯效果 + 粒子特效
- **3D效果**：✅ 保留 TagCanvas 3D 标签云旋转（可拖拽、可旋转）

### 1.2 详细布局设计（需确认）

#### 布局方案 A：经典中央式（推荐）

```
╔═══════════════════════════════════════════════════════════════════════╗
║                     虎牙年会抽奖系统 - 布局设计                         ║
║                        (分辨率: 1920x1080)                            ║
╠═══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║  ┌─────────────────────────────────────────────────────────────────┐ ║
║  │                          顶部导航栏                              │ ║
║  │  (高度: 80px, 背景: 磨砂玻璃, 边框: 黄色细线)                    │ ║
║  ├─────────────────────────────────────────────────────────────────┤ ║
║  │                                                                 │ ║
║  │  🐯 虎牙年会抽奖                    [抽奖结果] [抽奖配置] [♪]    │ ║
║  │  (Logo + 标题)                       (导航按钮，黄色描边)       │ ║
║  │                                                                 │ ║
║  └─────────────────────────────────────────────────────────────────┘ ║
║                                                                       ║
║                                                                       ║
║                ┌────────────────────────────────┐                    ║
║                │       奖品等级标签              │                    ║
║                │  (抽奖中显示，如"特等奖")        │                    ║
║                │   字体: 40px, 颜色: 霓虹黄      │                    ║
║                └────────────────────────────────┘                    ║
║                                                                       ║
║                                                                       ║
║         ╔════════════════════════════════════════════╗               ║
║         ║                                            ║               ║
║         ║        中央3D旋转区 / 结果展示区            ║               ║
║         ║        (TagCanvas 3D标签云)                ║               ║
║         ║                                            ║               ║
║         ║  宽度: 1000px                              ║               ║
║         ║  高度: 600px                               ║               ║
║         ║  背景: rgba(45, 27, 78, 0.4)               ║               ║
║         ║  磨砂效果: blur(20px)                      ║               ║
║         ║  边框: 2px solid rgba(249, 215, 28, 0.3)  ║               ║
║         ║  圆角: 20px                                ║               ║
║         ║  阴影: 0 0 40px rgba(249, 215, 28, 0.2)    ║               ║
║         ║                                            ║               ║
║         ║  ┌──────────────────────────────────────┐ ║               ║
║         ║  │  抽奖中：                            │ ║               ║
║         ║  │                                      │ ║               ║
║         ║  │     张三1   🔄                       │ ║               ║
║         ║  │  李四  🔄   🔄  王五2                │ ║               ║
║         ║  │      🔄  🔄  🔄                      │ ║               ║
║         ║  │  赵六  🔄 孙七 🔄  周八              │ ║               ║
║         ║  │      🔄      🔄                      │ ║               ║
║         ║  │   吴九      郑十                     │ ║               ║
║         ║  │                                      │ ║               ║
║         ║  │  (名字在3D空间中立体旋转)            │ ║               ║
║         ║  │  (✅ 保留TagCanvas旋转效果)          │ ║               ║
║         ║  │                                      │ ║               ║
║         ║  └──────────────────────────────────────┘ ║               ║
║         ║                                            ║               ║
║         ║  ┌──────────────────────────────────────┐ ║               ║
║         ║  │  结果显示：                          │ ║               ║
║         ║  │                                      │ ║               ║
║         ║  │  ┌────┐  ┌────┐  ┌────┐  ┌────┐    │ ║               ║
║         ║  │  │ 👤 │  │ 👤 │  │ 👤 │  │ 👤 │    │ ║               ║
║         ║  │  │照片│  │照片│  │照片│  │照片│    │ ║               ║
║         ║  │  │────│  │────│  │────│  │────│    │ ║               ║
║         ║  │  │张三1│  │李四│  │王五2│  │赵六│    │ ║               ║
║         ║  │  │iPh │  │iPh │  │iPad│  │iPad│    │ ║               ║
║         ║  │  └────┘  └────┘  └────┘  └────┘    │ ║               ║
║         ║  │                                      │ ║               ║
║         ║  │  (卡片依次弹出，带旋转动画)           │ ║               ║
║         ║  │                                      │ ║               ║
║         ║  └──────────────────────────────────────┘ ║               ║
║         ║                                            ║               ║
║         ╚════════════════════════════════════════════╝               ║
║               (呼吸灯边框：3s循环，明暗变化)                          ║
║                                                                       ║
║                                                                       ║
║                ┌────────────────────────────────┐                    ║
║                │                                │                    ║
║                │       🎯  开始抽奖              │                    ║
║                │                                │                    ║
║                │   背景: 黄色渐变                │                    ║
║                │   宽度: 300px, 高度: 80px       │                    ║
║                │   圆角: 40px                    │                    ║
║                │   阴影: 0 8px 30px 黄色光晕     │                    ║
║                │   hover: 上浮2px + 光晕增强     │                    ║
║                │                                │                    ║
║                └────────────────────────────────┘                    ║
║                                                                       ║
║                                                                       ║
║  ┌─────────────────────────────────────────────────────────────────┐ ║
║  │                      底部信息栏（可选）                          │ ║
║  │  Copyright © 2025 虎牙直播              已抽取: 15/100          │ ║
║  └─────────────────────────────────────────────────────────────────┘ ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### 布局方案 B：左右分栏式

```
╔═══════════════════════════════════════════════════════════════════════╗
║                                                                       ║
║  ┌──────────────────┬────────────────────────────────────────────┐  ║
║  │  🐯 虎牙年会抽奖  │   [抽奖结果] [抽奖配置] [♪]                │  ║
║  └──────────────────┴────────────────────────────────────────────┘  ║
║                                                                       ║
║  ┌────────────┬─────────────────────────────────────────────────┐  ║
║  │            │                                                  │  ║
║  │  侧边栏    │          中央3D旋转区                             │  ║
║  │  (宽200px) │          (TagCanvas 3D标签云)                    │  ║
║  │            │          (宽度: 1400px)                          │  ║
║  │            │          (高度: 700px)                           │  ║
║  │  ┌──────┐  │                                                  │  ║
║  │  │特等奖│  │     ╔══════════════════════════════╗             │  ║
║  │  └──────┘  │     ║                              ║             │  ║
║  │  ┌──────┐  │     ║                              ║             │  ║
║  │  │一等奖│  │     ║   3D旋转 / 结果展示          ║             │  ║
║  │  └──────┘  │     ║                              ║             │  ║
║  │  ┌──────┐  │     ║                              ║             │  ║
║  │  │二等奖│  │     ╚══════════════════════════════╝             │  ║
║  │  └──────┘  │                                                  │  ║
║  │  ┌──────┐  │                                                  │  ║
║  │  │三等奖│  │          ┌──────────────────┐                    │  ║
║  │  └──────┘  │          │   🎯 开始抽奖     │                    │  ║
║  │            │          └──────────────────┘                    │  ║
║  │  (等级快速 │                                                  │  ║
║  │   选择区)   │                                                  │  ║
║  └────────────┴─────────────────────────────────────────────────┘  ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### 布局方案 C：全屏沉浸式

```
╔═══════════════════════════════════════════════════════════════════════╗
║                                                                       ║
║                                                                       ║
║                      虎牙年会抽奖                                      ║
║                    (Logo居中顶部)                                     ║
║                                                                       ║
║                                                                       ║
║                                                                       ║
║                                                                       ║
║              ╔════════════════════════════════════╗                  ║
║              ║                                    ║                  ║
║              ║                                    ║                  ║
║              ║     巨大的3D旋转区                  ║                  ║
║              ║     (TagCanvas 3D标签云)           ║                  ║
║              ║     (占据屏幕中央80%)              ║                  ║
║              ║                                    ║                  ║
║              ║     1200px x 800px                 ║                  ║
║              ║                                    ║                  ║
║              ║                                    ║                  ║
║              ╚════════════════════════════════════╝                  ║
║                                                                       ║
║                                                                       ║
║                  ┌────────────────────────┐                          ║
║                  │    🎯  开始抽奖         │                          ║
║                  │   (超大按钮，400px宽)   │                          ║
║                  └────────────────────────┘                          ║
║                                                                       ║
║  [⚙]  [📊]  [♪]                                                      ║
║  (左下角小按钮)                                                        ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
```

---

### 1.3 推荐方案：布局方案 A（经典中央式）

**选择理由：**
1. ✅ 视觉焦点集中，用户注意力在中央
2. ✅ 适合大屏展示（年会投影）
3. ✅ 信息层次清晰：导航 → 舞台 → 操作按钮
4. ✅ 易于响应式适配
5. ✅ 符合用户需求的"简洁大气"风格

**关键尺寸：**
- 顶部导航栏：80px 高
- 中央舞台：1000px 宽 x 600px 高
- 开始按钮：300px 宽 x 80px 高
- 整体宽度：1920px（标准Full HD）

---

### 1.4 详细元素说明

#### 1.4.1 顶部导航栏
```
┌─────────────────────────────────────────────────────────────────┐
│  🐯 虎牙年会抽奖           [抽奖结果] [抽奖配置] [♪]              │
│  ↑                          ↑         ↑         ↑                │
│  Logo+标题                  导航按钮(磨砂玻璃+黄色边框)          │
│  字体: 32px                 尺寸: 120px x 50px                   │
│  颜色: #ffd700              圆角: 10px                           │
│                             hover: 黄色光晕                       │
└─────────────────────────────────────────────────────────────────┘
```

#### 1.4.2 中央抽奖舞台（状态一：待机）
```
╔════════════════════════════════════════════════════════════╗
║                                                            ║
║                                                            ║
║                    准备开始抽奖                             ║
║                    (大字提示)                              ║
║                    字体: 48px, 颜色: 白色                  ║
║                                                            ║
║              张三1   🔄                                     ║
║         李四    🔄     🔄   王五2                           ║
║              🔄    🔄    🔄                                 ║
║         赵六   🔄  孙七  🔄   周八                          ║
║              🔄         🔄                                  ║
║         吴九        郑十                                    ║
║                                                            ║
║    ✅ TagCanvas 3D 标签云效果（待机状态）：                 ║
║    - 名字在3D空间中缓慢旋转                                ║
║    - 可以用鼠标拖拽改变旋转方向                            ║
║    - 标签颜色: 虎牙黄 #ffd700                              ║
║    - 旋转速度: 缓慢（初始速度）                            ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
    边框: 呼吸灯效果，3秒周期，黄色光晕明暗变化
```

#### 1.4.3 中央抽奖舞台（状态二：抽奖中）
```
╔════════════════════════════════════════════════════════════╗
║                                                            ║
║                    特等奖                                   ║
║                 (当前抽奖等级，悬浮在顶部)                  ║
║                 字体: 40px, 颜色: #ffd700                  ║
║                 霓虹发光效果，闪烁动画                      ║
║                                                            ║
║              张三1   🔄                                     ║
║         李四    🔄     🔄   王五2                           ║
║              🔄    🔄    🔄                                 ║
║         赵六   🔄  孙七  🔄   周八                          ║
║              🔄         🔄                                  ║
║         吴九        郑十                                    ║
║                                                            ║
║    ✅ 保留现有的 TagCanvas 3D 标签云效果：                  ║
║    - 名字在3D空间中立体旋转（前后、左右、远近变化）        ║
║    - 可以用鼠标拖拽改变旋转方向                            ║
║    - 抽奖时快速旋转（SetSpeed加速）                        ║
║    - 标签颜色改为虎牙黄 #ffd700                            ║
║    - 标签文字大小: 20px (textHeight)                      ║
║    - 支持照片显示（50x50px）                               ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
    边框: 呼吸加快(1.5秒周期)，光晕增强
```

#### 1.4.4 中央抽奖舞台（状态三：结果展示）
```
╔════════════════════════════════════════════════════════════╗
║                                                            ║
║               🏆 特等奖 - iPhone 15 Pro 🏆                 ║
║               (结果标题，字体: 40px)                       ║
║                                                            ║
║    ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   ║
║    │  ╔═══╗  │  │  ╔═══╗  │  │  ╔═══╗  │  │  ╔═══╗  │   ║
║    │  ║   ║  │  │  ║   ║  │  │  ║   ║  │  │  ║   ║  │   ║
║    │  ║ 👤 ║  │  │  ║ 👤 ║  │  │  ║ 👤 ║  │  │  ║ 👤 ║  │   ║
║    │  ║照片║  │  │  ║照片║  │  │  ║照片║  │  │  ║照片║  │   ║
║    │  ╚═══╝  │  │  ╚═══╝  │  │  ╚═══╝  │  │  ╚═══╝  │   ║
║    │─────────│  │─────────│  │─────────│  │─────────│   ║
║    │  张三1   │  │  李四    │  │  王五2   │  │  赵六    │   ║
║    │─────────│  │─────────│  │─────────│  │─────────│   ║
║    │ iPhone  │  │ iPhone  │  │  iPad   │  │  iPad   │   ║
║    │15 Pro   │  │15 Pro   │  │  Air    │  │  Air    │   ║
║    └─────────┘  └─────────┘  └─────────┘  └─────────┘   ║
║    (0s延迟)     (0.15s延迟)  (0.3s延迟)   (0.45s延迟)    ║
║                                                            ║
║    (卡片尺寸: 180px x 240px)                               ║
║    (磨砂玻璃背景 + 黄色边框)                               ║
║    (弹出动画: scale + rotate)                             ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
```

#### 1.4.5 开始/停止按钮
```
待机状态：
┌──────────────────────────────────────┐
│                                      │
│          🎯  开始抽奖                 │
│                                      │
│  背景: linear-gradient(135deg,       │
│         #f9d71c 0%, #ffd700 100%)    │
│  字体: 32px, 加粗, 颜色: #1a0b2e     │
│  圆角: 40px                          │
│  阴影: 0 8px 30px rgba(249,215,28,0.5)│
│                                      │
└──────────────────────────────────────┘

Hover 状态：
┌──────────────────────────────────────┐
│                                      │
│          🎯  开始抽奖                 │
│                                      │  ↑ 上浮 2px
│  背景: linear-gradient(135deg,       │
│         #ffd700 0%, #ffed4e 100%)    │
│  阴影: 0 12px 40px rgba(249,215,28,0.8)│
│  (光晕增强)                          │
│                                      │
└──────────────────────────────────────┘

抽奖中状态：
┌──────────────────────────────────────┐
│                                      │
│          ⏸  停止抽奖                 │
│                                      │
│  背景: linear-gradient(135deg,       │
│         #ff6b6b 0%, #ff8787 100%)    │
│  (红色渐变)                          │
│  动画: 脉冲放大(1.2秒周期)           │
│                                      │
└──────────────────────────────────────┘
```

---

### 1.5 颜色使用规范

```
╔═══════════════════════════════════════════════════════════╗
║                 虎牙配色使用规范                           ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  背景层级：                                               ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │  最深层: #1a0b2e (深紫色)                           │ ║
║  │  中间层: #2d1b4e (主紫色)                           │ ║
║  │  磨砂玻璃: rgba(45, 27, 78, 0.4)                     │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  文字颜色：                                               ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │  主要文字: #ffffff (纯白)                            │ ║
║  │  次要文字: #b8a8d8 (浅紫)                           │ ║
║  │  弱化文字: #8070a0 (中紫)                           │ ║
║  │  强调文字: #ffd700 (霓虹黄)                         │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  边框和装饰：                                             ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │  主要边框: rgba(249, 215, 28, 0.3) (半透明黄)       │ ║
║  │  高亮边框: rgba(249, 215, 28, 0.8) (亮黄)           │ ║
║  │  阴影/光晕: rgba(249, 215, 28, 0.2~0.5)             │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  按钮颜色：                                               ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │  主按钮: #f9d71c → #ffd700 (黄色渐变)               │ ║
║  │  按钮文字: #1a0b2e (深紫)                           │ ║
║  │  停止按钮: #ff6b6b → #ff8787 (红色渐变)             │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

---

### 1.6 动画时序规划

```
╔═══════════════════════════════════════════════════════════╗
║                 动画时序图                                 ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  待机状态 → 点击"开始抽奖"按钮:                            ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │  0.0s: 按钮缩放动画 (scale 0.95 → 1)                │ ║
║  │  0.1s: 弹出配置对话框 (淡入 + 缩放)                  │ ║
║  │  用户选择配置并点击"立即抽奖"                         │ ║
║  │  0.2s: 对话框关闭 (淡出)                             │ ║
║  │  0.3s: 舞台边框呼吸加快 (1.5秒周期)                  │ ║
║  │  0.5s: 3D云加速旋转 (SetSpeed加速)                   │ ║
║  │  持续: 背景音乐切换到紧张音效                         │ ║
║  │  持续: TagCanvas 3D标签云快速旋转                    │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  抽奖中 → 点击"停止抽奖"按钮:                              ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │  0.0s: 3D云旋转减速 (SetSpeed减速)                   │ ║
║  │  0.5s: 3D云停止旋转                                  │ ║
║  │  0.6s: 舞台内容淡出 (opacity: 1 → 0)                 │ ║
║  │  0.8s: 结果标题淡入 + 向下飘入                       │ ║
║  │  1.0s: 第1个中奖卡片弹出 (scale + rotate)            │ ║
║  │  1.15s: 第2个中奖卡片弹出                            │ ║
║  │  1.30s: 第3个中奖卡片弹出                            │ ║
║  │  1.45s: 第4个中奖卡片弹出                            │ ║
║  │  持续: 背景音乐切换回舒缓BGM                          │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  持续动画 (一直循环):                                      ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │  边框呼吸灯: 3s 周期 (待机), 1.5s 周期 (抽奖中)      │ ║
║  │  3D云旋转: 持续旋转，速度可调                        │ ║
║  │  粒子漂浮: 5s 周期                                   │ ║
║  │  霓虹闪烁: 2s 周期                                   │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

---

## 二、技术实现方案

### 2.1 保留的核心逻辑（不变）
✅ 所有 Vuex store 数据结构
✅ 所有抽奖算法 (algorithm.js)
✅ 候选人生成逻辑
✅ 中奖判断逻辑
✅ 两种抽取模式（整个等级/单个奖品）
✅ 额外抽奖次数机制
✅ 一人中奖全部失效规则
✅ CSV 导入/导出功能
✅ IndexedDB 照片存储

### 2.2 UI 重构方案

#### 方案A：替换 TagCanvas，使用纯 CSS + Vue 动画
**优点**：
- 完全可控的动画效果
- 更容易实现呼吸灯、霓虹光效
- 性能更好，移动端友好
- 可以实现数字滚动机效果

**缺点**：
- 失去 3D 标签云的独特性
- 开发工作量较大

**实现方式**：
```vue
<template>
  <div class="lottery-stage">
    <!-- 数字滚动区 -->
    <div class="number-roller" :class="{ active: rolling }">
      <div class="roller-item" v-for="name in visibleNames" :key="name">
        {{ name }}
      </div>
    </div>
  </div>
</template>

<style lang="scss">
.lottery-stage {
  position: relative;
  width: 800px;
  height: 500px;
  background: rgba(45, 27, 78, 0.4);
  backdrop-filter: blur(20px);
  border: 2px solid rgba(249, 215, 28, 0.3);
  border-radius: 20px;
  box-shadow:
    0 0 40px rgba(249, 215, 28, 0.2),
    inset 0 0 60px rgba(45, 27, 78, 0.8);

  // 呼吸灯效果
  animation: breathing 3s ease-in-out infinite;
}

@keyframes breathing {
  0%, 100% {
    box-shadow:
      0 0 40px rgba(249, 215, 28, 0.2),
      inset 0 0 60px rgba(45, 27, 78, 0.8);
    border-color: rgba(249, 215, 28, 0.3);
  }
  50% {
    box-shadow:
      0 0 80px rgba(249, 215, 28, 0.5),
      inset 0 0 80px rgba(45, 27, 78, 0.9);
    border-color: rgba(249, 215, 28, 0.8);
  }
}
</style>
```

#### 方案B：保留 TagCanvas，添加霓虹光效外壳
**优点**：
- 保留独特的 3D 标签云效果
- 改动最小，风险低
- 可以快速完成

**缺点**：
- TagCanvas 本身不好定制
- 难以完美融入新设计风格

**推荐方案：方案A** - 虽然工作量大，但效果更惊艳，更贴合需求

---

## 三、详细实施计划

### 阶段1：建立设计系统（CSS 变量和工具类）

**文件**：`src/assets/style/theme.scss`

```scss
// ===== 虎牙品牌色 =====
$huya-purple-dark: #1a0b2e;
$huya-purple: #2d1b4e;
$huya-purple-light: #4a2f6e;
$huya-yellow: #f9d71c;
$huya-yellow-bright: #ffd700;

// ===== 背景渐变 =====
$bg-gradient: linear-gradient(135deg, #1a0b2e 0%, #2d1b4e 50%, #1a0b2e 100%);

// ===== 磨砂玻璃 =====
@mixin glassmorphism {
  background: rgba(45, 27, 78, 0.4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

// ===== 霓虹光效 =====
@mixin neon-glow($color: #f9d71c) {
  box-shadow:
    0 0 10px $color,
    0 0 20px $color,
    0 0 40px $color,
    0 0 80px $color;
}

// ===== 呼吸灯 =====
@mixin breathing-border($color: #f9d71c) {
  animation: breathing 3s ease-in-out infinite;

  @keyframes breathing {
    0%, 100% {
      box-shadow: 0 0 20px rgba($color, 0.3);
      border-color: rgba($color, 0.3);
    }
    50% {
      box-shadow: 0 0 60px rgba($color, 0.8);
      border-color: rgba($color, 0.8);
    }
  }
}
```

### 阶段2：重构主界面布局（App.vue）

**修改文件**：`src/App.vue`

**核心改动**：
1. 移除 TagCanvas 相关代码
2. 新增数字滚动组件
3. 重新设计背景和布局
4. 添加粒子背景效果（可选）

**新的 template 结构**：
```vue
<template>
  <div id="root" class="huya-theme">
    <!-- 粒子背景 -->
    <div class="particles-bg"></div>

    <!-- 顶部导航 -->
    <header class="header-glass">
      <div class="logo">
        <span class="logo-icon">🎯</span>
        <span class="logo-text">虎牙年会抽奖</span>
      </div>
      <div class="nav-buttons">
        <button class="nav-btn" @click="showResult = true">
          <i class="icon-trophy"></i> 抽奖结果
        </button>
        <button class="nav-btn" @click="showConfig = true">
          <i class="icon-settings"></i> 抽奖配置
        </button>
        <button class="nav-btn audio-btn" @click="toggleAudio">
          <i :class="audioPlaying ? 'icon-pause' : 'icon-play'"></i>
        </button>
      </div>
    </header>

    <!-- 主抽奖舞台 -->
    <div class="lottery-stage-container">
      <!-- 中央抽奖区 -->
      <div class="lottery-stage" :class="{ active: running, result: showRes }">
        <!-- 数字滚动区 -->
        <div v-if="!showRes" class="number-roller">
          <transition-group name="roll" tag="div" class="roller-list">
            <div
              v-for="(item, index) in displayCandidates"
              :key="item.key"
              class="roller-item"
              :style="{ animationDelay: `${index * 0.1}s` }"
            >
              <span class="name">{{ item.displayName }}</span>
              <img v-if="item.photo" :src="item.photo" class="avatar" />
            </div>
          </transition-group>
        </div>

        <!-- 中奖结果展示 -->
        <transition name="result-pop">
          <div v-if="showRes" class="result-display">
            <div class="result-title">
              <span class="prize-level">{{ currentPrizeLevel }}</span>
              <span v-if="currentPrizeName" class="prize-name">{{ currentPrizeName }}</span>
            </div>
            <div class="winners-grid">
              <div
                v-for="(winner, index) in resArr"
                :key="index"
                class="winner-card"
                :style="{ animationDelay: `${index * 0.15}s` }"
              >
                <div v-if="winner.photo" class="winner-photo">
                  <img :src="winner.photo" />
                </div>
                <div class="winner-name">{{ winner.displayName }}</div>
                <div v-if="winner.prizeName" class="winner-prize">{{ winner.prizeName }}</div>
              </div>
            </div>
          </div>
        </transition>
      </div>

      <!-- 开始按钮 -->
      <button
        class="start-btn"
        :class="{ running: running }"
        @click="handleStartClick"
      >
        <span class="btn-icon">{{ running ? '⏸' : '🎯' }}</span>
        <span class="btn-text">{{ running ? '停止抽奖' : '开始抽奖' }}</span>
      </button>
    </div>

    <!-- 配置对话框（重新设计） -->
    <transition name="modal">
      <LotteryConfig v-if="showConfig" :visible.sync="showConfig" @resetconfig="handleConfigChange" />
    </transition>

    <!-- 结果对话框（重新设计） -->
    <transition name="modal">
      <Result v-if="showResult" :visible.sync="showResult" />
    </transition>

    <!-- 抽奖配置表单对话框 -->
    <transition name="modal">
      <DrawConfig v-if="showDrawConfig" :visible.sync="showDrawConfig" @submit="startDraw" />
    </transition>

    <audio id="audiobg" ref="audio" preload="auto" loop>
      <source :src="audioSrc" />
    </audio>
  </div>
</template>
```

### 阶段3：创建新组件（数字滚动 + 抽奖配置表单）

**新文件1**：`src/components/NumberRoller.vue`
- 负责数字滚动动画
- 支持暂停/继续
- 霓虹光效边框

**新文件2**：`src/components/DrawConfig.vue`（拆分自 Tool.vue）
- 独立的抽奖配置表单
- 磨砂玻璃对话框
- 虎牙配色按钮

### 阶段4：重新设计样式文件

**修改文件**：
- `src/assets/style/base.scss` - 更新全局样式
- `src/assets/style/animation.scss` - 添加新动画
- 新增 `src/assets/style/theme.scss` - 主题变量
- 新增 `src/assets/style/components.scss` - 组件样式

**新增动画**：
```scss
// 数字滚动动画
@keyframes roll-up {
  0% {
    transform: translateY(100%);
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100%);
    opacity: 0;
  }
}

// 结果弹出动画（优化）
@keyframes result-pop {
  0% {
    transform: scale(0) rotateZ(-180deg);
    opacity: 0;
  }
  70% {
    transform: scale(1.1) rotateZ(10deg);
  }
  100% {
    transform: scale(1) rotateZ(0deg);
    opacity: 1;
  }
}

// 粒子漂浮
@keyframes particle-float {
  0%, 100% {
    transform: translate(0, 0);
  }
  50% {
    transform: translate(20px, -20px);
  }
}

// 霓虹闪烁
@keyframes neon-flicker {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}
```

### 阶段5：更新配置和结果对话框

**修改文件**：
- `src/components/LotteryConfig.vue` - 应用磨砂玻璃样式
- `src/components/Result.vue` - 应用虎牙配色

**样式改动**：
```scss
// 对话框磨砂玻璃效果
.el-dialog {
  background: rgba(45, 27, 78, 0.6) !important;
  backdrop-filter: blur(30px);
  border: 2px solid rgba(249, 215, 28, 0.3);
  border-radius: 20px;
  box-shadow: 0 0 60px rgba(249, 215, 28, 0.3);
}

.el-dialog__header {
  border-bottom: 1px solid rgba(249, 215, 28, 0.2);
}

// 按钮重新设计
.el-button--primary {
  background: linear-gradient(135deg, #f9d71c 0%, #ffd700 100%);
  border: none;
  color: #1a0b2e;
  font-weight: bold;
  box-shadow: 0 4px 15px rgba(249, 215, 28, 0.4);

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(249, 215, 28, 0.6);
  }
}
```

---

## 四、关键文件修改清单

### 4.1 需要大幅修改的文件

| 文件 | 修改内容 | 风险等级 |
|------|---------|---------|
| `src/App.vue` | 移除 TagCanvas，新增数字滚动组件，重构布局 | 🔴 高 |
| `src/assets/style/base.scss` | 更新背景、颜色、字体 | 🟡 中 |
| `src/assets/style/animation.scss` | 新增多个动画定义 | 🟢 低 |
| `src/components/LotteryConfig.vue` | 样式更新，保持逻辑不变 | 🟡 中 |
| `src/components/Result.vue` | 样式更新，保持逻辑不变 | 🟡 中 |

### 4.2 需要新建的文件

| 文件 | 用途 | 依赖 |
|------|------|------|
| `src/assets/style/theme.scss` | 主题变量和 mixin | 无 |
| `src/components/NumberRoller.vue` | 数字滚动组件 | App.vue |
| `src/components/DrawConfig.vue` | 抽奖配置表单（拆分自Tool.vue） | App.vue |
| `src/components/ParticlesBackground.vue` | 粒子背景（可选） | App.vue |

### 4.3 保持不变的文件（核心逻辑）

✅ `src/store/index.js` - Vuex store
✅ `src/helper/algorithm.js` - 抽奖算法
✅ `src/helper/db.js` - IndexedDB
✅ `src/helper/index.js` - 工具函数
✅ `src/components/Importphoto.vue` - 照片导入

---

## 五、配色方案详细定义

### 5.1 虎牙品牌色提取

```scss
// 主色调
$primary-bg: #1a0b2e;           // 深紫色背景
$primary-purple: #2d1b4e;       // 主紫色
$primary-purple-light: #4a2f6e; // 浅紫色（hover状态）

// 强调色
$accent-yellow: #f9d71c;        // 虎牙黄（主要）
$accent-yellow-bright: #ffd700; // 亮黄色（高光）
$accent-yellow-dark: #e5c10f;   // 暗黄色（按下状态）

// 中性色
$text-primary: #ffffff;         // 主文字
$text-secondary: #b8a8d8;       // 次要文字
$text-muted: #8070a0;           // 弱化文字

// 透明度变体
$glass-bg: rgba(45, 27, 78, 0.4);           // 磨砂玻璃背景
$glass-border: rgba(249, 215, 28, 0.3);     // 磨砂玻璃边框
$shadow-glow: rgba(249, 215, 28, 0.2);      // 阴影发光
```

### 5.2 渐变方案

```scss
// 背景渐变
$bg-gradient: linear-gradient(135deg, #1a0b2e 0%, #2d1b4e 50%, #1a0b2e 100%);

// 按钮渐变
$btn-gradient: linear-gradient(135deg, #f9d71c 0%, #ffd700 100%);
$btn-gradient-hover: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);

// 卡片渐变
$card-gradient: linear-gradient(180deg, rgba(45, 27, 78, 0.6) 0%, rgba(45, 27, 78, 0.3) 100%);
```

---

## 六、动画效果清单

### 6.1 核心动画

| 动画名称 | 触发时机 | 效果描述 | 持续时间 |
|---------|---------|---------|---------|
| breathing | 持续 | 紫色边框呼吸灯效果 | 3s |
| roll-up | 抽奖中 | 数字向上滚动消失 | 1.5s |
| neon-flicker | 持续 | 霓虹灯闪烁效果 | 2s |
| result-pop | 停止抽奖 | 结果弹出 + 旋转 | 0.8s |
| particle-float | 持续 | 背景粒子漂浮 | 5s |
| btn-pulse | hover | 按钮脉冲放大 | 0.3s |

### 6.2 过渡效果

| 过渡名称 | 应用场景 | 效果 |
|---------|---------|------|
| modal | 对话框开关 | 淡入淡出 + 缩放 |
| roll | 名字滚动 | 向上移动 + 透明度 |
| result-pop | 结果显示 | 弹出 + 旋转 |
| fade | 通用 | 透明度渐变 |

---

## 七、响应式设计

### 7.1 断点定义

```scss
$breakpoint-xl: 1920px;  // 超大屏
$breakpoint-lg: 1440px;  // 大屏
$breakpoint-md: 1024px;  // 中屏
$breakpoint-sm: 768px;   // 小屏
$breakpoint-xs: 480px;   // 超小屏
```

### 7.2 适配策略

- **1920px+**: 舞台宽度 1200px，字体放大 120%
- **1440px**: 舞台宽度 1000px（默认）
- **1024px**: 舞台宽度 800px，隐藏部分装饰
- **768px**: 舞台宽度 90vw，按钮纵向排列
- **< 768px**: 提示横屏体验更佳

---

## 八、实施步骤

### Step 1: 创建主题系统（30分钟）
- [ ] 创建 `theme.scss`
- [ ] 定义所有颜色变量
- [ ] 定义 mixin（磨砂玻璃、霓虹光效、呼吸灯）
- [ ] 更新 `base.scss` 引入主题

### Step 2: 重构 App.vue 布局（2小时）
- [ ] 移除 TagCanvas 相关代码
- [ ] 新增背景渐变和粒子层
- [ ] 创建主舞台容器
- [ ] 创建数字滚动区域
- [ ] 创建开始按钮
- [ ] 更新顶部导航栏

### Step 3: 实现数字滚动组件（1.5小时）
- [ ] 创建 `NumberRoller.vue`
- [ ] 实现滚动动画逻辑
- [ ] 添加呼吸灯边框
- [ ] 优化性能（虚拟滚动）

### Step 4: 更新样式文件（1小时）
- [ ] 更新 `animation.scss`
- [ ] 创建 `components.scss`
- [ ] 定义按钮样式
- [ ] 定义卡片样式
- [ ] 定义对话框样式

### Step 5: 重新设计对话框（1小时）
- [ ] 更新 LotteryConfig.vue 样式
- [ ] 更新 Result.vue 样式
- [ ] 创建 DrawConfig.vue（拆分自Tool.vue）
- [ ] 应用磨砂玻璃效果

### Step 6: 调整动画和交互（1小时）
- [ ] 优化结果弹出动画
- [ ] 添加音效触发
- [ ] 测试各种抽奖模式
- [ ] 微调时间曲线

### Step 7: 测试和调优（1小时）
- [ ] 测试特一二等奖抽奖
- [ ] 测试三等奖抽奖
- [ ] 测试额外抽奖次数
- [ ] 测试一人中奖全部失效
- [ ] 测试响应式布局
- [ ] 性能优化

---

## 九、风险评估与缓解策略

### 9.1 高风险项

**风险1：移除 TagCanvas 后，抽奖体验下降**
- **缓解**：实现更流畅的数字滚动动画，增加视觉反馈
- **备选**：保留 TagCanvas，仅更新外层样式

**风险2：新动画性能差，卡顿**
- **缓解**：使用 CSS transform 而非 top/left，启用 GPU 加速
- **备选**：降低动画复杂度，减少同时出现的元素数量

**风险3：抽奖逻辑被意外破坏**
- **缓解**：不修改任何 algorithm.js 和 store/index.js 文件
- **备选**：在修改前备份关键文件

### 9.2 中风险项

**风险4：磨砂玻璃效果在部分浏览器不支持**
- **缓解**：添加 fallback 样式（纯色半透明背景）

**风险5：配色在实际显示器上效果差**
- **缓解**：提供色调微调选项

---

## 十、验证清单

### 10.1 功能验证（保证抽奖逻辑不变）

- [ ] **人员导入**：CSV 导入正常
- [ ] **奖品配置**：CSV 导入正常
- [ ] **额外抽奖次数**：
  - [ ] 开关生效
  - [ ] 生效等级配置正确
  - [ ] 名字显示为 "张三1"、"张三2"
- [ ] **特一二等奖 - 整个等级模式**：
  - [ ] 候选人合并去重
  - [ ] 奖品按顺序分配
  - [ ] 结果显示奖品名称
- [ ] **特一二等奖 - 单个奖品模式**：
  - [ ] 正常抽取
  - [ ] 剩余数量正确
- [ ] **三等奖抽奖**：正常抽取
- [ ] **一人中奖全部失效**：
  - [ ] 开启时，张三1 中奖后，张三2 失效
  - [ ] 关闭时，张三1 和张三2 可分别中奖
- [ ] **中奖记录删除**：正常删除，可重新参与
- [ ] **结果导出**：CSV 导出正常

### 10.2 UI 验证

- [ ] **配色**：符合虎牙品牌色
- [ ] **磨砂玻璃**：效果明显
- [ ] **霓虹光效**：黄色光晕清晰
- [ ] **呼吸灯**：边框明暗变化流畅
- [ ] **数字滚动**：流畅无卡顿
- [ ] **结果弹出**：动画震撼
- [ ] **响应式**：各尺寸下布局正常

### 10.3 性能验证

- [ ] **页面加载**：< 3秒
- [ ] **动画流畅度**：60fps
- [ ] **大量候选人**（500+）：滚动不卡顿
- [ ] **内存占用**：正常范围

---

## 十一、时间估算

| 阶段 | 任务 | 预计时间 |
|------|------|---------|
| 1 | 主题系统 | 30分钟 |
| 2 | App.vue 重构 | 2小时 |
| 3 | 数字滚动组件 | 1.5小时 |
| 4 | 样式文件 | 1小时 |
| 5 | 对话框重新设计 | 1小时 |
| 6 | 动画调优 | 1小时 |
| 7 | 测试 | 1小时 |
| **总计** | | **8小时** |

---

## 十二、效果预览描述

### 12.1 打开页面
- 深紫色渐变背景，微弱的星光粒子缓慢漂浮
- 中央巨大的磨砂玻璃抽奖舞台，紫色边框缓慢呼吸
- 底部黄色渐变按钮，悬浮阴影，文字"开始抽奖"

### 12.2 点击"开始抽奖"
- 弹出磨砂玻璃配置对话框
- 选择等级、模式、奖品
- 点击"立即抽奖"

### 12.3 抽奖进行中
- 抽奖舞台边框呼吸加快，黄色光效增强
- 中央数字快速向上滚动，模糊效果
- 背景音乐切换到紧张音效
- 底部按钮变为"停止抽奖"，脉冲动画

### 12.4 停止抽奖
- 数字滚动减速停止
- 中奖结果以旋转弹出动画出现
- 每个中奖者卡片依次弹出（错开延迟）
- 卡片磨砂玻璃质感，黄色边框高亮
- 显示照片、名字、奖品名称
- 背景音乐切换回舒缓背景乐

---

## 十三、总结

本方案在**完全保留所有抽奖逻辑**的前提下，通过：
1. **替换 TagCanvas 为数字滚动组件**
2. **应用虎牙品牌配色（深紫+霓虹黄）**
3. **大量使用磨砂玻璃和霓虹光效**
4. **添加呼吸灯、粒子背景等细节**

打造一个**高端、科技感、惊艳**的年会抽奖系统。

**核心原则**：
- ✅ 抽奖逻辑 100% 不变
- ✅ UI 视觉 100% 重新设计
- ✅ 配色严格遵循虎牙品牌
- ✅ 动画流畅，性能优先
